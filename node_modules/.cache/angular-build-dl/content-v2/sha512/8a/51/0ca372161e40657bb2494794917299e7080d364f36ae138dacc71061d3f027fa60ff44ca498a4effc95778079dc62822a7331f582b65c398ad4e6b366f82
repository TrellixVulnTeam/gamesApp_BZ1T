{"version":3,"sources":["webpack:///src/app/games/space/space-routing.module.ts","webpack:///src/app/games/space/space.module.ts","webpack:///src/app/games/space/space.page.ts","webpack:///src/app/services/db.service.ts","webpack:///src/app/services/turn.ts","webpack:///src/app/games/space/space.page.scss","webpack:///src/app/games/space/space.page.html"],"names":["routes","path","component","SpacePage","loadChildren","then","m","ShipsPageModule","TechsPageModule","SpacePageRoutingModule","NgModule","imports","RouterModule","exports","SpacePageModule","CommonModule","FormsModule","IonicModule","ReactiveFormsModule","declarations","router","db","turnList","shipList","total","subTotal","carryValue","colonyValue","mineralValue","pipeValue","manteninanceValue","turnOrderBidValue","updateValue","remaining","ionicForm","FormGroup","carry","FormControl","colony","mineral","pipe","manteninance","turnOrderBid","update","dbState","subscribe","res","fetchTurn","item","length","CPS","navigateByUrl","e","turnForm","Turn","updateTurn","data","console","log","Router","DbService","Component","selector","template","platform","sqlite","httpClient","sqlPorter","BehaviorSubject","shipListOwner","isDbReady","ready","create","name","location","storage","getFakeData","asObservable","get","responseType","importSqlToDb","_","getShips","getTurn","getShipsOwner","next","error","executeSql","items","rows","i","push","id","Id","Type","Class","CP","Attack_Strength","Defense_Strength","Hull_Size","Description","Buy","turnObject","Platform","SQLite","HttpClient","SQLitePorter","Injectable","providedIn"],"mappings":"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","file":"src_app_games_space_space_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SpacePage } from './space.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SpacePage\r\n  },\r\n  {\r\n    path: 'ships',\r\n    loadChildren: () => import('./ships/ships.module').then( m => m.ShipsPageModule)\r\n  },\r\n  {\r\n    path: 'techs',\r\n    loadChildren: () => import('./techs/techs.module').then( m => m.TechsPageModule)\r\n  }\r\n\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SpacePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SpacePageRoutingModule } from './space-routing.module';\r\n\r\nimport { SpacePage } from './space.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    SpacePageRoutingModule\r\n  ],\r\n  declarations: [SpacePage]\r\n})\r\nexport class SpacePageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\nimport { Router } from '@angular/router';\r\nimport { DbService } from '../../services/db.service';\r\nimport { Turn } from './../../services/turn';\r\nimport { Ship } from 'src/app/services/ship';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-space',\r\n  templateUrl: './space.page.html',\r\n  styleUrls: ['./space.page.scss'],\r\n})\r\nexport class SpacePage implements OnInit {\r\n\r\n  turnList: Turn[] = [];\r\n  shipList:Ship[] = [];\r\n\r\n  ionicForm :FormGroup;\r\n  total= 0;\r\n  subTotal= 0;\r\n  carryValue = 0;\r\n  colonyValue= 0;\r\n  mineralValue = 0;\r\n  pipeValue = 0;\r\n  manteninanceValue = 0;\r\n  turnOrderBidValue = 0;\r\n  updateValue = 0;\r\n  remaining = 0;\r\n\r\n  constructor(private router: Router, private db: DbService,) { }\r\n\r\n  ngOnInit() {\r\n      this.ionicForm = new FormGroup({\r\n        carry: new FormControl(this.carryValue),\r\n        colony: new FormControl(0),\r\n        mineral: new FormControl(0),\r\n        pipe: new FormControl(0),\r\n        manteninance:new FormControl(0),\r\n        turnOrderBid:new FormControl(0),\r\n        update :new FormControl(0)\r\n      });\r\n\r\n      this.db.dbState().subscribe((res) => {\r\n        if(res){\r\n          this.db.fetchTurn().subscribe(item => {\r\n            this.turnList = item\r\n            if(this.turnList.length > 0){\r\n              this.carryValue = this.turnList[0].CPS\r\n            }else{\r\n              this.carryValue = 0\r\n            }\r\n            \r\n          })\r\n        }\r\n      });\r\n}\r\n\r\nnavigateToGames(){\r\n  this.router.navigateByUrl('/games');\r\n}\r\ngoToOwnerShips(){\r\n  this.router.navigateByUrl('/games/space/ships');\r\n}\r\n\r\npublic updateCarry(e) :void{\r\n  this.total =  e + this.colonyValue + this.mineralValue + this.pipeValue\r\n}\r\npublic updateColony(e) :void{\r\n  this.total = this.carryValue + e + this.mineralValue + this.pipeValue\r\n}\r\npublic updateMineral(e) :void{\r\n  this.total = this.carryValue + this.colonyValue + e + this.pipeValue\r\n} \r\npublic updatePipe(e) :void{\r\n  this.total = this.carryValue + this.colonyValue + this.mineralValue + e\r\n}\r\n\r\npublic updateManteninance(e) :void{\r\n  this.subTotal = this.total - e - this.turnOrderBidValue\r\n  this.remaining = this.subTotal;\r\n}\r\npublic updateTurnOrderBid(e) :void{\r\n  this.subTotal = this.total - this.manteninanceValue - e\r\n  this.remaining = this.subTotal;\r\n}\r\npublic updateUpdate(e) :void{\r\n  this.remaining = this.subTotal -  e\r\n}\r\n\r\n\r\ncpForm(){\r\n  let turnForm = new Turn(); \r\n    turnForm.CPS = this.remaining;\r\n\r\n  this.db.updateTurn(0, turnForm).then((data) => {\r\n    console.log(data);\r\n   this.total=  this.remaining;\r\n   this.subTotal= 0;\r\n   this.carryValue = 0;\r\n   this.colonyValue= 0;\r\n   this.mineralValue = 0;\r\n   this.pipeValue = 0;\r\n   this.manteninanceValue = 0;\r\n   this.turnOrderBidValue = 0;\r\n   this.updateValue = 0;\r\n   this.remaining = 0;\r\n  })\r\n}\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Platform } from '@ionic/angular';\r\nimport { Ship } from './ship';\r\nimport { Turn } from './turn';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { SQLitePorter } from '@ionic-native/sqlite-porter/ngx';\r\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite/ngx';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class DbService {\r\n  private storage: SQLiteObject;\r\n  shipList = new BehaviorSubject([]);\r\n  turnList = new BehaviorSubject([]);\r\n  shipListOwner = new BehaviorSubject([]);\r\n  private isDbReady: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n\r\n  constructor(\r\n    private platform: Platform, \r\n    private sqlite: SQLite, \r\n    private httpClient: HttpClient,\r\n    private sqlPorter: SQLitePorter,\r\n  ) {\r\n    this.platform.ready().then(() => {\r\n      this.sqlite.create({\r\n        name: 'space_db.db',\r\n        location: 'default'\r\n      })\r\n      .then((db: SQLiteObject) => {\r\n          this.storage = db;\r\n          this.getFakeData();\r\n      });\r\n    });\r\n  }\r\n\r\n  dbState() {\r\n    return this.isDbReady.asObservable();\r\n  }\r\n \r\n  fetchShips(): Observable<Ship[]> {\r\n    return this.shipList.asObservable();\r\n  }\r\n\r\n  fetchShipsOwner(): Observable<Ship[]> {\r\n    return this.shipListOwner.asObservable();\r\n  }\r\n\r\n  fetchTurn(): Observable<Turn[]> {\r\n    return this.turnList.asObservable();\r\n  }\r\n\r\n    // Render fake data\r\n    getFakeData() {\r\n      this.httpClient.get(\r\n        'assets/seed.sql', \r\n        {responseType: 'text'}\r\n      ).subscribe(data => {\r\n        this.sqlPorter.importSqlToDb(this.storage, data)\r\n          .then(_ => {\r\n\r\n            this.getShips();\r\n            this.getTurn();\r\n            this.getShipsOwner();\r\n            this.isDbReady.next(true);\r\n          })\r\n          .catch(error => console.error(error));\r\n      });\r\n    }\r\n\r\n  // Get list\r\n  getShips(){\r\n    return this.storage.executeSql('SELECT * FROM ships where Buy = 0', []).then(res => {\r\n      let items: Ship[] = [];\r\n      if (res.rows.length > 0) {\r\n        for (var i = 0; i < res.rows.length; i++) { \r\n          items.push({ \r\n            id: res.rows.item(i).Id,\r\n            Type: res.rows.item(i).Type,\r\n            Class: res.rows.item(i).Class,\r\n            CP:res.rows.item(i).CP,\r\n            Attack_Strength: res.rows.item(i).Attack_Strength,\r\n            Defense_Strength: res.rows.item(i).Defense_Strength,\r\n            Hull_Size: res.rows.item(i).Hull_Size,\r\n            Description: res.rows.item(i).Description,\r\n            Buy: res.rows.item(i).Buy,\r\n           });\r\n        }\r\n      }\r\n      this.shipList.next(items);\r\n    });\r\n    \r\n  }\r\n\r\n  getShipsOwner(){\r\n    return this.storage.executeSql('SELECT * FROM ships where Buy = 1', []).then(res => {\r\n      let items: Ship[] = [];\r\n      if (res.rows.length > 0) {\r\n        for (var i = 0; i < res.rows.length; i++) { \r\n          items.push({ \r\n            id: res.rows.item(i).Id,\r\n            Type: res.rows.item(i).Type,\r\n            Class: res.rows.item(i).Class,\r\n            CP:res.rows.item(i).CP,\r\n            Attack_Strength: res.rows.item(i).Attack_Strength,\r\n            Defense_Strength: res.rows.item(i).Defense_Strength,\r\n            Hull_Size: res.rows.item(i).Hull_Size,\r\n            Description: res.rows.item(i).Description,\r\n            Buy: res.rows.item(i).Buy,\r\n           });\r\n        }\r\n      }\r\n      this.shipList.next(items);\r\n    });\r\n    \r\n  }\r\n\r\n  updateTurn(id, turnObject: Turn) {\r\n    let data = [turnObject.CPS,];\r\n    return this.storage.executeSql(`UPDATE turn SET CPS = ? WHERE id = ${id}`, data)\r\n    .then(data => {\r\n      this.getTurn();\r\n    })\r\n  }\r\n\r\n  getTurn(){\r\n    return this.storage.executeSql('SELECT * FROM turn', []).then(res => {\r\n      let items: Turn[] = [];\r\n      if (res.rows.length > 0) {\r\n        for (var i = 0; i < res.rows.length; i++) { \r\n          items.push({ \r\n            Id: res.rows.item(i).Id,\r\n            CPS: res.rows.item(i).CPS,\r\n           });\r\n        }\r\n      }\r\n      this.turnList.next(items);\r\n    });\r\n\r\n  // Add\r\n  /* addSong(artist_name, song_name) {\r\n    let data = [artist_name, song_name];\r\n    return this.storage.executeSql('INSERT INTO songtable (artist_name, song_name) VALUES (?, ?)', data)\r\n    .then(res => {\r\n      this.getSongs();\r\n    });\r\n  } */\r\n \r\n /*  // Get single object\r\n  getSong(id): Promise<Ship> {\r\n    return this.storage.executeSql('SELECT * FROM songtable WHERE id = ?', [id]).then(res => { \r\n      return {\r\n        id: res.rows.item(0).id,\r\n        artist_name: res.rows.item(0).artist_name,  \r\n        song_name: res.rows.item(0).song_name\r\n      }\r\n    });\r\n  }\r\n\r\n  // Update\r\n  updateSong(id, song: Ship) {\r\n    let data = [song.artist_name, song.song_name];\r\n    return this.storage.executeSql(`UPDATE songtable SET artist_name = ?, song_name = ? WHERE id = ${id}`, data)\r\n    .then(data => {\r\n      this.getSongs();\r\n    })\r\n  }\r\n\r\n  // Delete\r\n  deleteSong(id) {\r\n    return this.storage.executeSql('DELETE FROM songtable WHERE id = ?', [id])\r\n    .then(_ => {\r\n      this.getSongs();\r\n    });\r\n  } */\r\n}\r\n}\r\n\r\n","export class Turn {\n    Id:number;\n\tCPS:number;\n}\n","export default \".headerSpace {\\n  display: contents;\\n}\\n\\n.headerTitle {\\n  text-align: center;\\n  margin: 2rem;\\n}\\n\\nion-menu-button {\\n  color: var(--ion-color-primary);\\n}\\n\\n.menuButton {\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.inputCp {\\n  text-align: center;\\n  position: absolute;\\n  left: 26%;\\n}\\n\\n.carryOver {\\n  margin-top: 1rem;\\n  text-align: center;\\n  padding: 0;\\n}\\n\\n.carry {\\n  margin-top: 2em;\\n}\\n\\n.colony {\\n  margin-top: 7em;\\n  text-align: center;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.mineral {\\n  margin-top: 12em;\\n}\\n\\n.pipe {\\n  margin-top: 17em;\\n}\\n\\n.manteninance {\\n  margin-top: 25em;\\n  color: red;\\n}\\n\\n.turnOrderBid {\\n  margin-top: 29em;\\n  color: red;\\n}\\n\\n.total {\\n  position: absolute;\\n  margin-top: 22em;\\n  background: gainsboro;\\n  text-align: center;\\n  width: 100%;\\n}\\n\\n.formClass {\\n  margin: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFBO0FBQ0o7O0FBRUE7RUFDSSxrQkFBQTtFQUNBLFlBQUE7QUFDSjs7QUFDQTtFQUNJLCtCQUFBO0FBRUo7O0FBQ0U7RUFDRSxhQUFBO0VBQ0EsdUJBQUE7QUFFSjs7QUFFRTtFQUNFLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxTQUFBO0FBQ0o7O0FBRUU7RUFDRSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsVUFBQTtBQUNKOztBQUVFO0VBQ0UsZUFBQTtBQUNKOztBQUVFO0VBQ0UsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0FBQ0o7O0FBQ0U7RUFDRSxnQkFBQTtBQUVKOztBQUFFO0VBQ0UsZ0JBQUE7QUFHSjs7QUFERTtFQUNFLGdCQUFBO0VBQ0EsVUFBQTtBQUlKOztBQUZFO0VBQ0UsZ0JBQUE7RUFDQSxVQUFBO0FBS0o7O0FBSEU7RUFDRSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EscUJBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7QUFNSjs7QUFKRTtFQUNFLFNBQUE7QUFPSiIsImZpbGUiOiJzcGFjZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaGVhZGVyU3BhY2V7XHJcbiAgICBkaXNwbGF5OiBjb250ZW50cztcclxufVxyXG5cclxuLmhlYWRlclRpdGxle1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgbWFyZ2luOiAycmVtO1xyXG59XHJcbmlvbi1tZW51LWJ1dHRvbiB7XHJcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xyXG4gIH1cclxuXHJcbiAgLm1lbnVCdXR0b257XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgfVxyXG5cclxuXHJcbiAgLmlucHV0Q3Age1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbGVmdDogMjYlO1xyXG4gIH1cclxuXHJcbiAgLmNhcnJ5T3ZlcntcclxuICAgIG1hcmdpbi10b3A6IDFyZW07XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG4gIH1cclxuXHJcbiAgLmNhcnJ5e1xyXG4gICAgbWFyZ2luLXRvcDogMmVtO1xyXG4gIH1cclxuXHJcbiAgLmNvbG9ueXtcclxuICAgIG1hcmdpbi10b3A6IDdlbTtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICB9XHJcbiAgLm1pbmVyYWx7XHJcbiAgICBtYXJnaW4tdG9wOiAxMmVtO1xyXG4gIH1cclxuICAucGlwZXtcclxuICAgIG1hcmdpbi10b3A6IDE3ZW07XHJcbiAgfVxyXG4gIC5tYW50ZW5pbmFuY2V7XHJcbiAgICBtYXJnaW4tdG9wOiAyNWVtO1xyXG4gICAgY29sb3I6IHJlZDtcclxuICB9XHJcbiAgLnR1cm5PcmRlckJpZHtcclxuICAgIG1hcmdpbi10b3A6IDI5ZW07XHJcbiAgICBjb2xvcjogcmVkO1xyXG4gIH1cclxuICAudG90YWx7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAyMmVtO1xyXG4gICAgYmFja2dyb3VuZDogZ2FpbnNib3JvO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG4gIC5mb3JtQ2xhc3N7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgfSJdfQ== */\";","export default \"<ion-header>\\r\\n  <ion-toolbar >  \\r\\n    <ion-button class=\\\"headerSpace\\\" color=\\\"primary\\\" (click)=\\\"navigateToGames()\\\"> <ion-icon name=\\\"arrow-back\\\"></ion-icon>&nbsp;&nbsp; Back</ion-button>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-title class=\\\"headerTitle\\\">Space Empire 4X</ion-title>\\r\\n  <section class=\\\"menuButton\\\">\\r\\n    <ion-button style=\\\"width: 4rem;\\\" size=\\\"small\\\">CP'S</ion-button>\\r\\n    <ion-button style=\\\"width: 4rem;\\\" size=\\\"small\\\" color=\\\"secondary\\\" (click)=\\\"goToOwnerShips()\\\">SHIPS</ion-button>\\r\\n    <ion-button style=\\\"width: 4rem;\\\" size=\\\"small\\\" color=\\\"success\\\">TECHS</ion-button>\\r\\n    <ion-button style=\\\"width: 4rem;\\\" size=\\\"small\\\" color=\\\"warning\\\">RESET</ion-button>\\r\\n  </section>\\r\\n\\r\\n  <form  [formGroup]=\\\"ionicForm\\\" (ngSubmit)=\\\"cpForm()\\\" novalidate>\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col class=\\\"carryOver\\\">\\r\\n        <strong>Carry Over (max 30)</strong>\\r\\n        <ion-input  type=\\\"number\\\" max={30} min={0} formControlName=\\\"carry\\\" [(ngModel)]=\\\"carryValue\\\" (ionChange)=\\\"updateCarry(carryValue)\\\"></ion-input>\\r\\n \\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row class=\\\"carryOver\\\">\\r\\n        <ion-col>\\r\\n          <strong>+ Colony CPs</strong>\\r\\n          <ion-input style=\\\"text-align: center;\\\" type=\\\"number\\\" min={0} formControlName=\\\"colony\\\" [(ngModel)]=\\\"colonyValue\\\" (ionChange)=\\\"updateColony(colonyValue)\\\"></ion-input>\\r\\n          \\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <strong>+ Mineral CPs</strong>\\r\\n      <ion-input style=\\\"text-align: center;\\\" type=\\\"number\\\" min={0} formControlName=\\\"mineral\\\" [(ngModel)]=\\\"mineralValue\\\" (ionChange)=\\\"updateMineral(mineralValue)\\\"></ion-input>\\r\\n      \\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <strong>+ MS Pipe CPs</strong>\\r\\n      <ion-input style=\\\"text-align: center;\\\" type=\\\"number\\\" min={0} formControlName=\\\"pipe\\\" [(ngModel)]=\\\"pipeValue\\\" (ionChange)=\\\"updatePipe(pipeValue)\\\"></ion-input>\\r\\n   \\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <div style=\\\"text-align: center;background-color: lightgrey;\\\"><strong style=\\\"text-align: center;\\\">Total {{total}}</strong></div>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row class=\\\"carryOver\\\">\\r\\n        <ion-col>\\r\\n          <strong style=\\\"color: red;\\\">- Manteninance</strong>\\r\\n          <ion-input  style=\\\"text-align: center;color: red;\\\" type=\\\"number\\\" min={0} formControlName=\\\"manteninance\\\" [(ngModel)]=\\\"manteninanceValue\\\" (ionChange)=\\\"updateManteninance(manteninanceValue)\\\"></ion-input>       \\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <strong style=\\\"color: red;\\\">- Turn order bid</strong>\\r\\n          <ion-input style=\\\"text-align: center;color: red;\\\" type=\\\"number\\\" min={0} formControlName=\\\"turnOrderBid\\\" [(ngModel)]=\\\"turnOrderBidValue\\\" (ionChange)=\\\"updateTurnOrderBid(turnOrderBidValue)\\\"></ion-input>     \\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <div style=\\\"text-align: center;background-color: lightgrey;\\\"><strong style=\\\"text-align: center;\\\">SubTotal {{subTotal}}</strong></div>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row class=\\\"carryOver\\\">\\r\\n        <ion-col>\\r\\n          <ion-button size=\\\"small\\\"><ion-icon name=\\\"airplane\\\"></ion-icon>&nbsp;&nbsp;Buy Ships</ion-button>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-button size=\\\"small\\\"><ion-icon name=\\\"construct\\\"></ion-icon>&nbsp;&nbsp;Buy Techs</ion-button>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col class=\\\"carryOver\\\" style=\\\"color: red;\\\">\\r\\n        <strong>- CP spent on upgrades</strong>\\r\\n        <ion-input  type=\\\"number\\\" min={0} formControlName=\\\"update\\\" [(ngModel)]=\\\"updateValue\\\" (ionChange)=\\\"updateUpdate(updateValue)\\\"></ion-input>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row style=\\\"text-align: center;background-color: lightgrey;\\\"> \\r\\n        <ion-col>\\r\\n          <div ><strong style=\\\"text-align: center;\\\">Remaining CP {{remaining}}</strong></div>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-button size=\\\"small\\\" type=\\\"submit\\\" color=\\\"secondary\\\"><ion-icon name=\\\"save\\\"></ion-icon>&nbsp;&nbsp;SAVE</ion-button>\\r\\n         </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\";"]}